<div class="space-y-5 flash-in">
    {# Poker table with board revealed #}
    {% with board=scenario.board, seats=scenario.seats, dealer_seat=scenario.dealer_seat,
            pot=(scenario.pot ~ ' BB'), situation=scenario.postflop_situation %}
        {% include "partials/poker_table.html" %}
    {% endwith %}

    {# Hand info #}
    <div class="text-center text-sm">
        <span class="text-gray-500 font-mono">{{ scenario.hand_key }}</span>
        <span class="mx-2 text-gray-700">|</span>
        <span class="text-gray-400">{{ scenario.bucket_label }}</span>
        <span class="mx-2 text-gray-700">|</span>
        <span class="text-xs text-gray-500 font-mono">{{ scenario.texture_label }}</span>
    </div>

    {# Action form #}
    <form hx-post="/api/play/postflop_answer" hx-target="#scenario-zone" hx-swap="innerHTML">
        <input type="hidden" name="hand_key" value="{{ scenario.hand_key }}">
        <input type="hidden" name="postflop_position" value="{{ scenario.postflop_position }}">
        <input type="hidden" name="bucket" value="{{ scenario.bucket }}">
        <input type="hidden" name="bucket_label" value="{{ scenario.bucket_label }}">
        <input type="hidden" name="texture" value="{{ scenario.texture }}">
        <input type="hidden" name="texture_label" value="{{ scenario.texture_label }}">
        <input type="hidden" name="strategy" value="{{ scenario.strategy | tojson }}">
        <input type="hidden" name="correct_actions" value="{{ scenario.correct_actions | tojson }}">
        <input type="hidden" name="postflop_action_labels" value="{{ scenario.postflop_action_labels | tojson }}">
        <input type="hidden" name="range_breakdown" value="{{ scenario.range_breakdown | tojson }}">
        <input type="hidden" name="streak" value="{{ streak }}">

        <div class="flex justify-center gap-2 flex-wrap">
            {% for action in scenario.postflop_actions %}
            <button type="submit" name="action" value="{{ action }}"
                    class="px-5 py-2.5 rounded-lg font-semibold transition-all text-sm
                    {% if action == 'check' %}
                        bg-gray-700 hover:bg-gray-600
                    {% elif action == 'fold' %}
                        bg-gray-700 hover:bg-gray-600
                    {% elif action == 'call' %}
                        bg-blue-700 hover:bg-blue-600
                    {% elif action == 'bet_s' %}
                        bg-emerald-800 hover:bg-emerald-700
                    {% elif action == 'bet_m' %}
                        bg-emerald-700 hover:bg-emerald-600
                    {% elif action == 'bet_l' or action == 'raise' %}
                        bg-emerald-600 hover:bg-emerald-500
                    {% endif %}">
                {{ scenario.postflop_action_labels[action] }}
            </button>
            {% endfor %}
        </div>
    </form>
</div>
