<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LiveGTO">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/public/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/public/icon-192.png">
    <title>LiveGTO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        felt: { DEFAULT: '#0d5c2e', dark: '#0a4a24' },
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/htmx.org@2.0.4/dist/htmx.min.js"></script>
    <style>
        body { background: #0a0a0f; }

        /* --- Cards --- */
        .card-box {
            width: 3.2rem; height: 4.5rem;
            border-radius: 0.4rem;
            border: 2px solid #374151;
            background: #111827;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            font-weight: 700; font-size: 1.15rem;
            flex-shrink: 0;
        }
        .card-box .suit { font-size: 0.85rem; }
        .card-red { color: #ef4444; }
        .card-black { color: #e5e7eb; }
        .board-card {
            width: 3rem; height: 4.2rem;
            font-size: 1.05rem;
        }
        .board-card .suit { font-size: 0.8rem; }
        .card-back {
            width: 2.4rem; height: 3.4rem;
            border-radius: 0.35rem;
            background: linear-gradient(135deg, #1e3a5f 0%, #162d4a 50%, #1e3a5f 100%);
            border: 2px solid #2d5a8e;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }
        .card-back::after {
            content: '';
            position: absolute;
            inset: 3px;
            border-radius: 0.2rem;
            border: 1px solid #3b7dd8;
            opacity: 0.3;
        }

        /* --- Poker Table --- */
        .poker-table {
            position: relative;
            width: 100%;
            max-width: 580px;
            aspect-ratio: 1.8 / 1;
            margin: 0 auto;
        }
        .table-felt {
            position: absolute;
            inset: 12%;
            border-radius: 45%;
            background: radial-gradient(ellipse at 50% 40%, #0f6b35 0%, #0a5529 60%, #084420 100%);
            border: 6px solid #3d2b1a;
            box-shadow: 0 0 0 4px #2a1d10, 0 8px 32px rgba(0,0,0,0.5), inset 0 2px 20px rgba(0,0,0,0.3);
        }

        /* --- Seats --- */
        .seat {
            position: absolute;
            display: flex; flex-direction: column;
            align-items: center;
            gap: 0.2rem;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .seat-1 { left: 50%;  bottom: -4%;  top: auto; transform: translate(-50%, 0); }
        .seat-2 { left: 7%;   top: 72%; }
        .seat-3 { left: 7%;   top: 28%; }
        .seat-4 { left: 50%;  top: 2%; }
        .seat-5 { left: 93%;  top: 28%; }
        .seat-6 { left: 93%;  top: 72%; }

        .seat-info {
            display: flex; flex-direction: column; align-items: center; gap: 0.15rem;
        }
        .seat-label {
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.1rem 0.4rem;
            border-radius: 0.2rem;
            background: rgba(0,0,0,0.6);
            color: #9ca3af;
        }
        .seat-cards {
            display: flex;
            gap: 0.15rem;
        }
        .seat-active .seat-label {
            color: #d1d5db;
            background: rgba(0,0,0,0.8);
        }
        .seat-hero .seat-label {
            color: #34d399;
            background: rgba(6, 78, 59, 0.8);
            border: 1px solid rgba(52, 211, 153, 0.3);
        }
        .seat-inactive {
            opacity: 0.35;
        }

        /* Dealer chip */
        .dealer-chip {
            width: 1.2rem; height: 1.2rem;
            border-radius: 50%;
            background: #f5f5f5;
            color: #111;
            font-size: 0.55rem;
            font-weight: 800;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid #d4d4d4;
            box-shadow: 0 1px 3px rgba(0,0,0,0.4);
            position: absolute;
            bottom: -0.3rem;
            right: -0.3rem;
        }

        /* Board area */
        .board-area {
            position: absolute;
            left: 50%; top: 45%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            z-index: 5;
        }
        .board-cards {
            display: flex;
            gap: 0.25rem;
        }
        .board-slot {
            width: 3rem; height: 4.2rem;
            border-radius: 0.35rem;
            border: 1px dashed rgba(255,255,255,0.1);
        }
        .pot-display {
            font-size: 0.75rem;
            font-weight: 600;
            color: #fbbf24;
            background: rgba(0,0,0,0.5);
            padding: 0.15rem 0.6rem;
            border-radius: 1rem;
        }

        /* --- Chips --- */
        .bet-chip {
            display: flex; align-items: center; gap: 0.25rem;
            position: absolute;
            z-index: 15;
        }
        .chip-icon {
            width: 1.6rem; height: 1.6rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border: 2.5px solid #fbbf24;
            box-shadow: 0 2px 6px rgba(0,0,0,0.6);
        }
        .chip-amount {
            font-size: 0.7rem;
            font-weight: 700;
            color: #fbbf24;
            background: rgba(0,0,0,0.8);
            padding: 0.15rem 0.4rem;
            border-radius: 0.25rem;
            white-space: nowrap;
        }
        /* Chip positions near each seat, offset toward center of table */
        .bet-chip-1 { left: 50%; bottom: 28%; transform: translateX(-50%); }
        .bet-chip-2 { left: 28%; top: 58%; }
        .bet-chip-3 { left: 28%; top: 34%; }
        .bet-chip-4 { left: 50%; top: 22%; transform: translateX(-50%); }
        .bet-chip-5 { right: 28%; top: 34%; }
        .bet-chip-6 { right: 28%; top: 58%; }

        /* --- Animations --- */
        @keyframes flash-in { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .flash-in { animation: flash-in 0.25s ease-out; }
        .htmx-request { opacity: 0.6; transition: opacity 0.2s; }

        /* --- Range grid --- */
        .range-cell { width: 1.7rem; height: 1.7rem; font-size: 0.55rem; text-align: center; line-height: 1.7rem; }
        .range-cell-hero {
            outline: 2.5px solid #facc15;
            outline-offset: -1px;
            background: rgba(250, 204, 21, 0.25) !important;
            z-index: 10;
            position: relative;
            font-weight: 700;
            color: #facc15;
        }

        /* --- Bucket details (clickable expand) --- */
        .bucket-details summary { list-style: none; }
        .bucket-details summary::-webkit-details-marker { display: none; }
        .bucket-details summary::marker { display: none; content: ''; }
        .bucket-details[open] summary { background: rgba(31,41,55,0.4); border-radius: 0.375rem; }

        /* --- Responsive --- */
        @media (max-width: 640px) {
            .card-box { width: 2.6rem; height: 3.6rem; font-size: 1rem; }
            .card-box .suit { font-size: 0.75rem; }
            .board-card { width: 2.4rem; height: 3.4rem; font-size: 0.9rem; }
            .board-card .suit { font-size: 0.7rem; }
            .card-back { width: 1.8rem; height: 2.6rem; }
            .board-slot { width: 2.4rem; height: 3.4rem; }
            .seat-label { font-size: 0.5rem; }
            .dealer-chip { width: 1rem; height: 1rem; font-size: 0.45rem; }
            .range-cell { width: 1.4rem; height: 1.4rem; font-size: 0.45rem; line-height: 1.4rem; }
            .range-cell-hero { outline-width: 2px; }
            .pot-display { font-size: 0.65rem; }
            .chip-icon { width: 1.2rem; height: 1.2rem; border-width: 2px; }
            .chip-amount { font-size: 0.55rem; padding: 0.1rem 0.3rem; }
            .bet-chip { gap: 0.15rem; }
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen">
    <header class="border-b border-gray-800/60 px-4 py-3 flex items-center justify-between">
        <a href="/" class="text-xl font-bold text-emerald-400 tracking-tight">LiveGTO</a>
        <div id="streak-display">
            {% block streak %}{% endblock %}
        </div>
    </header>
    <main class="max-w-3xl mx-auto px-4 py-6">
        {% block content %}{% endblock %}
    </main>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }
    </script>
</body>
</html>
